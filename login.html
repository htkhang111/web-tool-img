<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Đăng Nhập - Studio Pro</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        body { background-color: #0d1117; color: #e6edf3; height: 100vh; display: flex; align-items: center; justify-content: center; font-family: 'Segoe UI', sans-serif; }
        .login-card { background-color: #161b22; border: 1px solid #30363d; border-radius: 6px; width: 100%; max-width: 350px; padding: 20px; box-shadow: 0 4px 12px rgba(0,0,0,0.5); }
        .logo { font-size: 2rem; color: #58a6ff; margin-bottom: 20px; text-align: center; }
        .form-control { background-color: #0d1117; border: 1px solid #30363d; color: #fff; }
        .form-control:focus { background-color: #0d1117; border-color: #58a6ff; color: #fff; box-shadow: 0 0 0 3px rgba(88, 166, 255, 0.3); }
        .btn-primary { background-color: #238636; border: none; font-weight: 600; width: 100%; padding: 8px; }
        .btn-primary:hover { background-color: #2ea043; }
        .btn-outline { background-color: transparent; border: 1px solid #30363d; color: #58a6ff; width: 100%; font-weight: 600; margin-top: 10px; }
        .btn-outline:hover { background-color: #30363d; color: #58a6ff; }
    </style>
</head>
<body>

    <div class="login-card">
        <div class="logo"><i class="fas fa-layer-group"></i> Studio Pro</div>
        
        <div class="mb-3">
            <label class="form-label small text-muted">Tên tài khoản</label>
            <input type="text" id="username" class="form-control" placeholder="Nhập tên..." autofocus>
        </div>

        <button class="btn btn-primary" id="btnLogin">Đăng Nhập</button>
        <button class="btn btn-outline" id="btnRegister">Tạo Tài Khoản Mới</button>

        <div class="text-center mt-4 text-muted small">
            Dev: Trương Khuynh Hàn
        </div>
    </div>

    <script type="module">
        import { Auth } from './js/modules/core/auth.js';

        // 1. Nếu đã đăng nhập rồi thì đá sang Index ngay
        if (Auth.isLoggedIn()) {
            window.location.href = 'index.html';
        }

        // 2. Sự kiện nút bấm
        document.getElementById('btnLogin').onclick = () => {
            const user = document.getElementById('username').value.trim();
            if(user) Auth.login(user);
            else alert("Vui lòng nhập tên!");
        };

        document.getElementById('btnRegister').onclick = () => {
            const user = document.getElementById('username').value.trim();
            if(user) Auth.register(user);
            else alert("Vui lòng nhập tên để đăng ký!");
        };

        // Enter cũng login
        document.getElementById('username').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') document.getElementById('btnLogin').click();
        });
    </script>
</body>
</html>